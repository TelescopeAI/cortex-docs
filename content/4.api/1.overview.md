---
title: API Overview
description: Overview of the Cortex REST API with authentication, endpoints, and usage patterns.
navigation:
  icon: i-lucide-globe
seo:
  title: Cortex API Overview
  description: Complete REST API reference for Cortex analytics platform with examples and authentication.
---

## API Overview

Cortex provides a comprehensive REST API that exposes all functionality through well-structured endpoints. The API follows RESTful conventions and uses FastAPI for automatic OpenAPI/Swagger documentation generation.

## Base URL

```
https://your-cortex-instance.com/api/v1
```

## Authentication

### API Key Authentication (Recommended)

Include your API key in the request header:

```bash [Terminal]
curl -X GET "https://api.cortex.ai/api/v1/metrics" \
  -H "Authorization: Bearer your-api-key" \
  -H "Content-Type: application/json"
```

```python
import requests

headers = {
    "Authorization": "Bearer your-api-key",
    "Content-Type": "application/json"
}

response = requests.get("https://api.cortex.ai/api/v1/metrics", headers=headers)
```

### Basic Authentication (Development Only)

```bash [Terminal]
curl -X GET "https://api.cortex.ai/api/v1/metrics" \
  -u "username:password" \
  -H "Content-Type: application/json"
```

## Request/Response Format

### Request Format

All requests should include the `Content-Type: application/json` header for requests with a body.

```json [Example Request]
{
  "workspace_id": "550e8400-e29b-41d4-a716-446655440000",
  "environment": "production",
  "metric_name": "monthly_revenue",
  "parameters": {
    "start_date": "2024-01-01",
    "end_date": "2024-12-31"
  }
}
```

### Response Format

All responses follow a consistent structure:

```json [Successful Response]
{
  "success": true,
  "data": {
    // Response data
  },
  "metadata": {
    "request_id": "req_123456",
    "timestamp": "2024-01-15T10:30:00Z",
    "execution_time": 0.234
  }
}
```

```json [Error Response]
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Invalid parameter: start_date must be before end_date",
    "details": {
      "field": "start_date",
      "value": "2024-12-31"
    }
  },
  "metadata": {
    "request_id": "req_123456",
    "timestamp": "2024-01-15T10:30:00Z"
  }
}
```

## Common HTTP Status Codes

| Status Code | Description | Usage |
|-------------|-------------|-------|
| `200` | OK | Successful request |
| `201` | Created | Resource successfully created |
| `204` | No Content | Successful request with no response body |
| `400` | Bad Request | Invalid request parameters |
| `401` | Unauthorized | Missing or invalid authentication |
| `403` | Forbidden | Insufficient permissions |
| `404` | Not Found | Resource not found |
| `409` | Conflict | Resource already exists |
| `422` | Unprocessable Entity | Validation error |
| `429` | Too Many Requests | Rate limit exceeded |
| `500` | Internal Server Error | Server error |
| `503` | Service Unavailable | Service temporarily unavailable |

## API Endpoints Overview

### Core Resources

| Resource | Description | Base Endpoint |
|----------|-------------|---------------|
| **Metrics** | Execute semantic metrics and get results | `/metrics` |
| **Dashboards** | Manage dashboards and widgets | `/dashboards` |
| **Data Sources** | Configure database connections | `/data-sources` |
| **Workspaces** | Manage workspaces and environments | `/workspaces` |
| **Consumers** | User and consumer group management | `/consumers` |
| **Semantic Models** | Define business data models | `/semantic-models` |

### Administrative Endpoints

| Endpoint | Description | Method |
|----------|-------------|---------|
| `/health` | Service health check | `GET` |
| `/metrics/system` | System performance metrics | `GET` |
| `/admin/cache/clear` | Clear system caches | `POST` |
| `/admin/migrate` | Database migration status | `GET` |

## Request Context

### Workspace and Environment Context

Most API requests require workspace and environment context:

```bash [Terminal]
# Execute metric in specific workspace/environment
curl -X POST "https://api.cortex.ai/api/v1/metrics/execute" \
  -H "Authorization: Bearer your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "workspace_id": "550e8400-e29b-41d4-a716-446655440000",
    "environment_id": "550e8400-e29b-41d4-a716-446655440001",
    "metric_name": "monthly_revenue",
    "parameters": {
      "start_date": "2024-01-01"
    }
  }'
```

### Consumer Context

Some requests support consumer-specific personalization:

```json [Consumer Context]
{
  "workspace_id": "550e8400-e29b-41d4-a716-446655440000",
  "environment_id": "550e8400-e29b-41d4-a716-446655440001",
  "consumer_id": "550e8400-e29b-41d4-a716-446655440002",
  "metric_name": "my_team_performance",
  "parameters": {
    "time_period": "last_30_days"
  }
}
```

## Pagination

List endpoints support pagination:

```bash [Pagination Example]
curl -X GET "https://api.cortex.ai/api/v1/metrics?page=1&limit=20" \
  -H "Authorization: Bearer your-api-key"
```

```json [Paginated Response]
{
  "success": true,
  "data": {
    "items": [
      // Array of items
    ],
    "pagination": {
      "page": 1,
      "limit": 20,
      "total": 150,
      "total_pages": 8,
      "has_next": true,
      "has_prev": false
    }
  }
}
```

## Filtering and Sorting

### Filtering

```bash [Filtering Example]
# Filter metrics by type
curl -X GET "https://api.cortex.ai/api/v1/metrics?filter[type]=aggregation" \
  -H "Authorization: Bearer your-api-key"

# Multiple filters
curl -X GET "https://api.cortex.ai/api/v1/metrics?filter[type]=aggregation&filter[status]=active" \
  -H "Authorization: Bearer your-api-key"
```

### Sorting

```bash [Sorting Example]
# Sort by creation date (descending)
curl -X GET "https://api.cortex.ai/api/v1/metrics?sort=created_at:desc" \
  -H "Authorization: Bearer your-api-key"

# Multiple sort fields
curl -X GET "https://api.cortex.ai/api/v1/metrics?sort=type:asc,created_at:desc" \
  -H "Authorization: Bearer your-api-key"
```

## Rate Limiting

API requests are subject to rate limiting:

- **Per User**: 1000 requests per minute
- **Per Workspace**: 10000 requests per minute
- **Burst Limit**: 100 requests per second

Rate limit headers in responses:

```http [Rate Limit Headers]
X-RateLimit-Limit: 1000
X-RateLimit-Remaining: 950
X-RateLimit-Reset: 1640995200
X-RateLimit-Retry-After: 30
```

## Error Handling

### Common Error Codes

| Error Code | HTTP Status | Description |
|------------|-------------|-------------|
| `VALIDATION_ERROR` | 422 | Invalid request parameters |
| `AUTHENTICATION_ERROR` | 401 | Invalid or missing credentials |
| `AUTHORIZATION_ERROR` | 403 | Insufficient permissions |
| `RESOURCE_NOT_FOUND` | 404 | Requested resource not found |
| `RESOURCE_CONFLICT` | 409 | Resource already exists |
| `RATE_LIMIT_EXCEEDED` | 429 | Too many requests |
| `INTERNAL_ERROR` | 500 | Internal server error |
| `SERVICE_UNAVAILABLE` | 503 | Service temporarily unavailable |

### Error Response Format

```json [Detailed Error Response]
{
  "success": false,
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "Validation failed for request",
    "details": [
      {
        "field": "start_date",
        "issue": "Date must be in YYYY-MM-DD format",
        "value": "2024/01/01"
      },
      {
        "field": "metric_name",
        "issue": "Metric not found",
        "value": "non_existent_metric"
      }
    ],
    "suggestion": "Please check the date format and verify the metric name exists"
  },
  "metadata": {
    "request_id": "req_1234567890",
    "timestamp": "2024-01-15T10:30:00Z",
    "endpoint": "/api/v1/metrics/execute"
  }
}
```

## SDKs and Libraries

### Python SDK

```python
from cortex_client import CortexClient

# Initialize client
client = CortexClient(
    base_url="https://api.cortex.ai",
    api_key="your-api-key"
)

# Execute metric
result = client.metrics.execute(
    workspace_id="550e8400-e29b-41d4-a716-446655440000",
    environment_id="550e8400-e29b-41d4-a716-446655440001",
    metric_name="monthly_revenue",
    parameters={
        "start_date": "2024-01-01",
        "end_date": "2024-12-31"
    }
)

print(result.data)
```

### JavaScript SDK

```javascript [JavaScript SDK Usage]
import { CortexClient } from '@cortex/client';

const client = new CortexClient({
  baseURL: 'https://api.cortex.ai',
  apiKey: 'your-api-key'
});

// Execute metric
const result = await client.metrics.execute({
  workspaceId: '550e8400-e29b-41d4-a716-446655440000',
  environmentId: '550e8400-e29b-41d4-a716-446655440001',
  metricName: 'monthly_revenue',
  parameters: {
    startDate: '2024-01-01',
    endDate: '2024-12-31'
  }
});

console.log(result.data);
```

## Best Practices

### 1. Error Handling

```python
import requests
from cortex_client.exceptions import CortexAPIError

try:
    result = client.metrics.execute({
        "metric_name": "monthly_revenue",
        "parameters": {"start_date": "2024-01-01"}
    })
    print(f"Revenue: {result.data['revenue']}")
except CortexAPIError as e:
    if e.status_code == 422:
        print(f"Validation error: {e.details}")
    elif e.status_code == 404:
        print(f"Metric not found: {e.details}")
    else:
        print(f"API error: {e.message}")
except requests.exceptions.ConnectionError:
        print("Connection error - check network connectivity")
except requests.exceptions.Timeout:
        print("Request timed out - try again later")
```

### 2. Pagination Handling

```python
def get_all_metrics(client, workspace_id):
    all_metrics = []
    page = 1
    limit = 100

    while True:
        response = client.metrics.list(
            workspace_id=workspace_id,
            page=page,
            limit=limit
        )

        all_metrics.extend(response.data['items'])

        if not response.data['pagination']['has_next']:
            break

        page += 1

    return all_metrics
```

### 3. Rate Limit Handling

```python
import time
import requests
from requests.exceptions import HTTPError

def execute_with_retry(client, operation, max_retries=3):
    for attempt in range(max_retries):
        try:
            return operation()
        except HTTPError as e:
            if e.response.status_code == 429:
                retry_after = int(e.response.headers.get('Retry-After', 30))
                print(f"Rate limited. Retrying in {retry_after} seconds...")
                time.sleep(retry_after)
                continue
            else:
                raise

    raise Exception("Max retries exceeded")
```

### 4. Connection Management

```python
import requests
from requests.adapters import HTTPAdapter
from urllib3.util.retry import Retry

# Configure retry strategy
retry_strategy = Retry(
    total=3,
    status_forcelist=[429, 500, 502, 503, 504],
    method_whitelist=["HEAD", "GET", "POST", "PUT", "DELETE", "OPTIONS", "TRACE"],
    backoff_factor=1
)

# Create HTTP adapter with retry strategy
adapter = HTTPAdapter(max_retries=retry_strategy)

# Create session with adapter
session = requests.Session()
session.mount("http://", adapter)
session.mount("https://", adapter)

# Use session for API calls
client = CortexClient(session=session)
```

## API Versioning

Cortex uses URL-based versioning:

- **Current Version**: v1 (`/api/v1/`)
- **Version Policy**: Backward compatibility maintained for 12 months
- **Deprecation Notice**: 6 months advance notice for breaking changes
- **Sunset Period**: 6 months after deprecation

## Interactive Documentation

Visit the interactive API documentation at:

```
https://your-cortex-instance.com/docs
```

The interactive docs provide:

- **Try It Out**: Execute API calls directly from the browser
- **Schema Explorer**: View detailed request/response schemas
- **Authentication**: Test with your API credentials
- **Examples**: Copy-paste code examples in multiple languages

## Support and Resources

### Getting Help

1. **API Documentation**: Interactive docs at `/docs`
2. **GitHub Issues**: Report bugs and request features
3. **Community Forum**: Share ideas and ask questions
4. **Status Page**: Check service availability

### API Changelog

Stay updated with API changes:

- **Breaking Changes**: Announced 6 months in advance
- **New Features**: Released with new versions
- **Bug Fixes**: Applied transparently with patch versions
- **Deprecations**: Marked in documentation with sunset dates

This comprehensive API overview should help you get started with integrating Cortex into your applications. For detailed endpoint documentation, continue to the specific API sections.
